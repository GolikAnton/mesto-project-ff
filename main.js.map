{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js","webpack://mesto-project-ff/./src/scripts/api.js"],"sourcesContent":["\r\nexport function createCard (title, link, deleteCard, handleCardImage,counter,id,cardOwner,cardId, likeCard, unLikeCard) {\r\n    const cardTemplate = document.querySelector(\"#card-template\").content;\r\n    const cardContent = cardTemplate.querySelector('.card').cloneNode(true); \r\n    const cardImage =  cardContent.querySelector('.card__image');\r\n        \r\n    cardContent.querySelector('.card__title').textContent = title; \r\n    cardImage.src = link;\r\n    cardImage.alt = title;\r\n    cardImage.id = cardId;\r\n    cardContent.querySelector('.card__like-counter').textContent=counter.length;\r\n  \r\n    const deleteButton = cardContent.querySelector('.card__delete-button');\r\n    if (id!==cardOwner) {\r\n        deleteButton.remove();\r\n    }; \r\n    deleteButton.addEventListener('click', ()=>{\r\n        deleteCard(cardId).then(() => {\r\n            const cards = Array.from(document.querySelectorAll('.card'))\r\n            cards.forEach(card => {\r\n                if(card.querySelector('.card__image').id === cardId) {\r\n                    card.remove()\r\n                }\r\n            })\r\n        })\r\n    });\r\n    \r\n    const likeButton = cardContent.querySelector('.card__like-button');\r\n    const checkLikes = counter.some(function(item) {\r\n        return item._id === id;\r\n    });\r\n    if (checkLikes) {\r\n        likeButton.classList.add ('card__like-button_is-active')\r\n    };\r\n    \r\n    likeButton.addEventListener('click', ()=>{\r\n        if (likeButton.classList.contains('card__like-button_is-active')) {\r\n            unLikeCard(cardId).then((data)=>{\r\n                const cards = Array.from(document.querySelectorAll('.card'))\r\n                cards.forEach(card => {\r\n                    if(card.querySelector('.card__image').id === cardId) {\r\n                        card.querySelector('.card__like-counter').textContent=data.likes.length;\r\n                    }\r\n                })\r\n            })\r\n            likeButton.classList.remove ('card__like-button_is-active');\r\n        } else {\r\n            likeCard(cardId).then((data)=>{\r\n                const cards = Array.from(document.querySelectorAll('.card'))\r\n                cards.forEach(card => {\r\n                    if(card.querySelector('.card__image').id === cardId) {\r\n                        card.querySelector('.card__like-counter').textContent=data.likes.length;\r\n                    }\r\n                })\r\n            })\r\n            likeButton.classList.add ('card__like-button_is-active');\r\n        }\r\n    });\r\n    \r\n    cardImage.addEventListener ('click', () =>{\r\n        handleCardImage (title, link);\r\n    });\r\n\r\n    return cardContent; \r\n};\r\n  \r\n//export function removeCard(evt, cardId) { \r\n//    const eventTarget = evt.target; \r\n//    const card = eventTarget.closest('.card'); \r\n//    card.remove();\r\n//    deleteCard(cardId);\r\n//};\r\n\r\n\r\n\r\n","export function handleEscape(evt) {\r\n  if (evt.key === 'Escape') {\r\n    closeModal(document.querySelector('.popup_is-opened'));\r\n  };\r\n};\r\n\r\nexport function openModal (form) {\r\n  form.classList.add ('popup_is-opened');\r\n  document.addEventListener('keydown', handleEscape);\r\n};\r\n\r\nexport function closeModal (form) {\r\n  form.classList.remove ('popup_is-opened');\r\n  document.removeEventListener('keydown', handleEscape);\r\n};\r\n\r\nexport function setPopupListeners () { \r\n  const modals = document.querySelectorAll('.popup');\r\n\r\n  modals.forEach((form) => {\r\n    form.classList.add ('popup_is-animated');\r\n    form.addEventListener('click', (event) => {\r\n      if(event.target.classList.contains('popup__close') || event.target.classList.contains ('popup_is-opened')) { \r\n      closeModal(form); \r\n      }\r\n    })\r\n  });\r\n};\r\n","const showInputError = (formElement, inputElement, validationParameters) => {\r\n    const formError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.add(validationParameters.inputErrorClass);\r\n    formError.textContent = inputElement.validationMessage;\r\n    formError.classList.add(validationParameters.errorClass);\r\n};\r\n  \r\nconst hideInputError = (formElement, inputElement, validationParameters) => {\r\n    const formError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.remove(validationParameters.inputErrorClass);\r\n    formError.classList.remove(validationParameters.errorClass);\r\n    formError.textContent = '';\r\n};\r\n  \r\nconst isValid = (formElement, inputElement, validationParameters) => {\r\n    if (inputElement.validity.patternMismatch) {\r\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } else {\r\n        inputElement.setCustomValidity(\"\");\r\n    }\r\n    if (!inputElement.validity.valid) {\r\n       showInputError(formElement, inputElement, validationParameters);\r\n    } else {\r\n       hideInputError(formElement, inputElement, validationParameters);\r\n    }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationParameters) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationParameters.submitButtonSelector);\r\n\r\n    inputList.forEach((inputElement) => {\r\n        inputElement.addEventListener('input', () => {\r\n        isValid(formElement, inputElement, validationParameters)\r\n        toggleButtonState(inputList, buttonElement, validationParameters);\r\n      });\r\n    });\r\n}; \r\n\r\nexport const enableValidation = (validationParameters) => {\r\n    const formList = Array.from(document.querySelectorAll(validationParameters.formSelector));\r\n    formList.forEach((formElement) => {\r\n        setEventListeners(formElement, validationParameters);\r\n    });\r\n};\r\n  \r\nexport const clearValidation = (formElement, validationParameters) =>{\r\n    const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationParameters.submitButtonSelector);\r\n\r\n    inputList.forEach((inputElement) => {\r\n        hideInputError(formElement, inputElement, validationParameters);\r\n        inputElement.setCustomValidity(\"\");\r\n    })\r\n    toggleButtonState (inputList, buttonElement, validationParameters);\r\n    \r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n};  \r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationParameters) => {\r\n    \r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add(validationParameters.inactiveButtonClass);\r\n    } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove(validationParameters.inactiveButtonClass);\r\n    }\r\n}; \r\n\r\n","import './pages/index.css';\r\nimport {createCard} from './scripts/card.js';\r\nimport {openModal, closeModal, setPopupListeners} from './scripts/modal.js'\r\nimport { enableValidation, clearValidation} from './scripts/validation.js';\r\nimport { addCard, deleteCard, editUserInfo, editUserAvatar,getCards, getUserInfo, likeCard, unLikeCard} from './scripts/api.js';\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst editForm = document.querySelector(\".popup_type_edit\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\nconst editAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst editAvatarForm = document.querySelector(\"form[name=edit-avatar]\");\r\nconst urlInput = document.querySelector(\".popup__input_type_avatar\");\r\nconst editProfileForm = document.querySelector(\"form[name=edit-profile]\");\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst newCardForm = document.querySelector(\".popup_type_new-card\");\r\nconst addCardForm = document.querySelector(\"form[name=new-place]\");\r\nconst placeNameInput = document.querySelector(\".popup__input_type_card-name\");\r\nconst linkInput = document.querySelector(\".popup__input_type_url\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImage = document.querySelector (\".popup__image\");\r\nconst caption = document.querySelector (\".popup__caption\");\r\nconst submitButton = document.querySelector(\".popup__button\");\r\n\r\nconst validationParameters = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nlet profileId;\r\n\r\nPromise.all([getUserInfo(),getCards()]).then((data)=> {\r\n  \r\n    profileTitle.textContent = data[0].name;\r\n    profileDescription.textContent = data[0].about;\r\n    profileImage.style = `background-image: url(${data[0].avatar})`;\r\n    profileId= data[0]._id;\r\n\r\n    data[1].forEach((card) => {\r\n      const cardContent = createCard(\r\n        card.name, \r\n        card.link, \r\n        deleteCard, \r\n        handleCardImage,\r\n        card.likes,\r\n        profileId,\r\n        card.owner._id,\r\n        card._id,\r\n        likeCard,\r\n        unLikeCard\r\n      );\r\n      placesList.append(cardContent);  \r\n    })\r\n})\r\n\r\nsetPopupListeners();\r\nenableValidation(validationParameters);\r\n\r\neditButton.addEventListener ('click', () => {\r\n  \r\n  clearValidation(editForm, validationParameters);\r\n  openModal (editForm);\r\n      \r\n  const form = document.forms['edit-profile'];\r\n  const inputName = form.elements.name;\r\n  const inputDescription = form.elements.description;\r\n  \r\n  inputName.value = profileTitle.textContent;\r\n  inputDescription.value = profileDescription.textContent;\r\n});\r\n\r\nfunction handleFormProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(submitButton,true);\r\n  editUserInfo(nameInput.value, jobInput.value).then ((result) => {\r\n      profileTitle.textContent = result.name;\r\n      profileDescription.textContent = result.about;\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n  \r\n  closeModal(editForm);\r\n}\r\n\r\neditProfileForm.addEventListener('submit', handleFormProfileSubmit); \r\n\r\nprofileImage.addEventListener('click', ()=> {\r\n  clearValidation(editAvatar, validationParameters);\r\n  openModal (editAvatar);\r\n});\r\n\r\nfunction handleFormAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n  \r\n  renderLoading(submitButton,true)\r\n  editUserAvatar(urlInput.value).then((data)=>{\r\n    profileImage.style = `background-image: url(${data.avatar})`\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n\r\n  editAvatarForm.reset();\r\n  closeModal(editAvatar);\r\n};\r\n\r\neditAvatar.addEventListener('submit', handleFormAvatarSubmit);\r\n\r\naddButton.addEventListener ('click', () => {\r\n  clearValidation(newCardForm, validationParameters);\r\n  openModal (newCardForm);  \r\n});\r\n\r\nfunction handleFormCardSubmit(evt) {\r\n  evt.preventDefault();\r\n  renderLoading(submitButton,true);\r\n  const card = {\r\n    name: placeNameInput.value,\r\n    link: linkInput.value,\r\n  };\r\n  \r\n  addCard(card.name, card.link).then ((data) => {\r\n    const cardId = data._id;\r\n    placesList.prepend(createCard (\r\n      card.name,\r\n      card.link,\r\n      deleteCard,\r\n      handleCardImage,\r\n      data.likes,\r\n      '',\r\n      '',\r\n      cardId,\r\n      likeCard,\r\n      unLikeCard\r\n    ));\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n  \r\n  addCardForm.reset();\r\n  closeModal(newCardForm);\r\n};\r\n\r\naddCardForm.addEventListener('submit', handleFormCardSubmit); \r\n \r\nfunction handleCardImage (title, link) {\r\n  popupImage.src = link;\r\n  popupImage.alt = title;\r\n  caption.textContent = title;\r\n  openModal (popupTypeImage);\r\n};\r\n\r\nconst renderLoading = (button, isLoading) => {\r\n  if (isLoading) {\r\n    button.textContent = 'Сохранение...';\r\n  } else {\r\n    button.textContent = 'Сохранить';\r\n  }\r\n};\r\n\r\n","const token = 'c5d70cb5-8b73-43b1-a4be-e5c1d7db4ad6';\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch('https://nomoreparties.co/v1/wff-cohort-21/users/me', {\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n.then ((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  })  \r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  });\r\n};\r\n\r\nexport const getCards = () => {\r\n  return fetch ('https://nomoreparties.co/v1/wff-cohort-21/cards', {\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n  .then ((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  })  \r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  });\r\n};;\r\n\r\nexport const editUserInfo = (title,description) => {\r\n  return fetch('https://nomoreparties.co/v1/wff-cohort-21/users/me', {\r\n    method: 'PATCH',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      name: title,\r\n      about: description\r\n    })\r\n  })\r\n  .then ((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  })  \r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  });\r\n};\r\n\r\nexport const addCard = (name,link) => {\r\n  return fetch('https://nomoreparties.co/v1/wff-cohort-21/cards', {\r\n    method: 'POST',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      name,\r\n      link\r\n    })\r\n  })\r\n  .then ((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  })  \r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  });\r\n};\r\n\r\nexport const deleteCard = (cardId) => {\r\n  return fetch(`https://nomoreparties.co/v1/wff-cohort-21/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    }\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json()      \r\n    }\r\n   return Promise.reject(`Ошибка: ${res.status}`);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })  \r\n};\r\n\r\nexport const likeCard =(cardId)=> {\r\n  return fetch(`https://nomoreparties.co/v1/wff-cohort-21/cards/likes/${cardId}`,{\r\n    method: 'PUT',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    }\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json()\r\n    }\r\n   return Promise.reject(`Ошибка: ${res.status}`);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })  \r\n};\r\n\r\nexport const unLikeCard =(cardId)=> {\r\n  return fetch(`https://nomoreparties.co/v1/wff-cohort-21/cards/likes/${cardId}`,{\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    }\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json()\r\n    }\r\n   return Promise.reject(`Ошибка: ${res.status}`);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })  \r\n};\r\n\r\nexport const editUserAvatar = (url) => {\r\n  return fetch('https://nomoreparties.co/v1/wff-cohort-21/users/me/avatar',{\r\n    method: 'PATCH',\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      avatar: url\r\n    })\r\n  })\r\n  .then ((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`)\r\n  })  \r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  });\r\n};"],"names":["createCard","title","link","deleteCard","handleCardImage","counter","id","cardOwner","cardId","likeCard","unLikeCard","cardContent","document","querySelector","content","cloneNode","cardImage","textContent","src","alt","length","deleteButton","remove","addEventListener","then","Array","from","querySelectorAll","forEach","card","likeButton","some","item","_id","classList","add","contains","data","likes","handleEscape","evt","key","closeModal","openModal","form","removeEventListener","profileId","hideInputError","formElement","inputElement","validationParameters","formError","concat","inputErrorClass","errorClass","clearValidation","inputList","inputSelector","buttonElement","submitButtonSelector","setCustomValidity","toggleButtonState","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","token","fetch","method","headers","authorization","res","ok","json","Promise","reject","status","catch","err","console","log","placesList","editButton","editForm","profileTitle","profileDescription","profileImage","editAvatar","editAvatarForm","urlInput","editProfileForm","nameInput","jobInput","addButton","newCardForm","addCardForm","placeNameInput","linkInput","popupTypeImage","popupImage","caption","submitButton","formSelector","all","name","about","style","avatar","owner","append","event","target","patternMismatch","dataset","errorMessage","validationMessage","showInputError","isValid","setEventListeners","enableValidation","forms","inputName","elements","inputDescription","description","value","preventDefault","renderLoading","body","JSON","stringify","result","finally","url","reset","prepend","button","isLoading"],"sourceRoot":""}