{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["\r\nexport function createCard (\r\n    title, \r\n    link, \r\n    deleteCard, \r\n    handleCardImage,\r\n    counter,\r\n    id,\r\n    cardOwner,\r\n    cardId, \r\n    likeCard, \r\n    unLikeCard,\r\n    removeCard,\r\n    like\r\n    ) {\r\n    const cardTemplate = document.querySelector(\"#card-template\").content;\r\n    const cardContent = cardTemplate.querySelector('.card').cloneNode(true); \r\n    const cardImage =  cardContent.querySelector('.card__image');\r\n        \r\n    cardContent.querySelector('.card__title').textContent = title; \r\n    cardImage.src = link;\r\n    cardImage.alt = title;\r\n    cardContent.querySelector('.card__like-counter').textContent=counter.length;\r\n    cardContent.id=cardId;\r\n  \r\n    const deleteButton = cardContent.querySelector('.card__delete-button');\r\n    if (id!==cardOwner) {\r\n        deleteButton.remove();\r\n    } else {\r\n        deleteButton.addEventListener('click', ()=>{\r\n            removeCard(deleteCard, cardId);\r\n        })\r\n    };\r\n    \r\n    const likeButton = cardContent.querySelector('.card__like-button');\r\n    const checkLikes = counter.some(function(item) {\r\n        return item._id === id;\r\n    });\r\n    if (checkLikes) {\r\n        likeButton.classList.add ('card__like-button_is-active')\r\n    };\r\n    \r\n    likeButton.addEventListener('click', ()=>{\r\n        like(likeButton,cardId,unLikeCard,likeCard);\r\n    });\r\n    \r\n    cardImage.addEventListener ('click', () =>{\r\n        handleCardImage (title, link);\r\n    });\r\n\r\n    return cardContent; \r\n};\r\n \r\n\r\nexport function removeCard(deleteCard, cardId) {\r\n    deleteCard(cardId).then(() => {\r\n        document.querySelector(`.card[id=\"${cardId}\"]`).remove();   \r\n    })\r\n    .catch((err) => {\r\n        console.log(err); // \"Что-то пошло не так: ...\"\r\n    })\r\n}\r\n\r\nexport function like (likeButton,cardId,unLikeCard,likeCard) {\r\n    const card = document.querySelector(`.card[id=\"${cardId}\"]`);\r\n    if (likeButton.classList.contains('card__like-button_is-active')) {\r\n        unLikeCard(cardId).then((data)=>{\r\n            card.querySelector('.card__like-counter').textContent=data.likes.length;\r\n        })\r\n        .catch((err) => {\r\n            console.log(err); // \"Что-то пошло не так: ...\"\r\n        })  \r\n        likeButton.classList.remove ('card__like-button_is-active');\r\n    } else {\r\n        likeCard(cardId).then((data)=>{\r\n            card.querySelector('.card__like-counter').textContent=data.likes.length;\r\n        })\r\n        .catch((err) => {\r\n            console.log(err); // \"Что-то пошло не так: ...\"\r\n        })  \r\n        likeButton.classList.add ('card__like-button_is-active');\r\n    }\r\n}\r\n\r\n\r\n\r\n","export function handleEscape(evt) {\r\n  if (evt.key === 'Escape') {\r\n    closeModal(document.querySelector('.popup_is-opened'));\r\n  };\r\n};\r\n\r\nexport function openModal (form) {\r\n  form.classList.add ('popup_is-opened');\r\n  document.addEventListener('keydown', handleEscape);\r\n};\r\n\r\nexport function closeModal (form) {\r\n  form.classList.remove ('popup_is-opened');\r\n  document.removeEventListener('keydown', handleEscape);\r\n};\r\n\r\nexport function setPopupListeners () { \r\n  const modals = document.querySelectorAll('.popup');\r\n\r\n  modals.forEach((form) => {\r\n    form.classList.add ('popup_is-animated');\r\n    form.addEventListener('click', (event) => {\r\n      if(event.target.classList.contains('popup__close') || event.target.classList.contains ('popup_is-opened')) { \r\n      closeModal(form); \r\n      }\r\n    })\r\n  });\r\n};\r\n","const showInputError = (formElement, inputElement, validationParameters) => {\r\n    const formError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.add(validationParameters.inputErrorClass);\r\n    formError.textContent = inputElement.validationMessage;\r\n    formError.classList.add(validationParameters.errorClass);\r\n};\r\n  \r\nconst hideInputError = (formElement, inputElement, validationParameters) => {\r\n    const formError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.classList.remove(validationParameters.inputErrorClass);\r\n    formError.classList.remove(validationParameters.errorClass);\r\n    formError.textContent = '';\r\n};\r\n  \r\nconst isValid = (formElement, inputElement, validationParameters) => {\r\n    if (inputElement.validity.patternMismatch) {\r\n        inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    } else {\r\n        inputElement.setCustomValidity(\"\");\r\n    }\r\n    if (!inputElement.validity.valid) {\r\n       showInputError(formElement, inputElement, validationParameters);\r\n    } else {\r\n       hideInputError(formElement, inputElement, validationParameters);\r\n    }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationParameters) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationParameters.submitButtonSelector);\r\n\r\n    inputList.forEach((inputElement) => {\r\n        inputElement.addEventListener('input', () => {\r\n        isValid(formElement, inputElement, validationParameters)\r\n        toggleButtonState(inputList, buttonElement, validationParameters);\r\n      });\r\n    });\r\n}; \r\n\r\nexport const enableValidation = (validationParameters) => {\r\n    const formList = Array.from(document.querySelectorAll(validationParameters.formSelector));\r\n    formList.forEach((formElement) => {\r\n        setEventListeners(formElement, validationParameters);\r\n    });\r\n};\r\n  \r\nexport const clearValidation = (formElement, validationParameters) =>{\r\n    const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationParameters.submitButtonSelector);\r\n\r\n    inputList.forEach((inputElement) => {\r\n        hideInputError(formElement, inputElement, validationParameters);\r\n        inputElement.setCustomValidity(\"\");\r\n    })\r\n    toggleButtonState (inputList, buttonElement, validationParameters);\r\n    \r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    })\r\n};  \r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationParameters) => {\r\n    \r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add(validationParameters.inactiveButtonClass);\r\n    } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove(validationParameters.inactiveButtonClass);\r\n    }\r\n}; \r\n\r\n","const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1//wff-cohort-21',\r\n  headers: {\r\n    authorization: 'c5d70cb5-8b73-43b1-a4be-e5c1d7db4ad6',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nfunction handleResponse (res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`)\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers\r\n  })\r\n  .then (handleResponse)  \r\n};\r\n\r\nexport const getCards = () => {\r\n  return fetch (`${config.baseUrl}/cards`, {\r\n    headers: config.headers\r\n  })\r\n  .then (handleResponse)  \r\n};\r\n\r\nexport const editUserInfo = (title,description) => {\r\n  return fetch (`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: title,\r\n      about: description\r\n    })\r\n  })\r\n  .then (handleResponse)  \r\n};\r\n\r\nexport const addCard = (name,link) => {\r\n  return fetch (`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      link\r\n    })\r\n  })\r\n  .then (handleResponse)  \r\n};\r\n\r\nexport const deleteCard = (cardId) => {\r\n  return fetch (`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then (handleResponse)  \r\n};\r\n\r\nexport const likeCard =(cardId)=> {\r\n  return fetch (`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  })\r\n  .then (handleResponse) \r\n};\r\n\r\nexport const unLikeCard =(cardId)=> {\r\n  return fetch (`${config.baseUrl}/cards/likes/${cardId}`,{\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then (handleResponse) \r\n};\r\n\r\nexport const editUserAvatar = (url) => {\r\n  return fetch (`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: url\r\n    })\r\n  })\r\n  .then (handleResponse) \r\n};","import './pages/index.css';\r\nimport {createCard, removeCard, like} from './scripts/card.js';\r\nimport {openModal, closeModal, setPopupListeners} from './scripts/modal.js'\r\nimport { enableValidation, clearValidation} from './scripts/validation.js';\r\nimport { addCard, deleteCard, editUserInfo, editUserAvatar,getCards, getUserInfo, likeCard, unLikeCard} from './scripts/api.js';\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst editForm = document.querySelector(\".popup_type_edit\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\nconst editAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst editAvatarForm = document.querySelector(\"form[name=edit-avatar]\");\r\nconst urlInput = document.querySelector(\".popup__input_type_avatar\");\r\nconst editProfileForm = document.querySelector(\"form[name=edit-profile]\");\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst newCardForm = document.querySelector(\".popup_type_new-card\");\r\nconst addCardForm = document.querySelector(\"form[name=new-place]\");\r\nconst placeNameInput = document.querySelector(\".popup__input_type_card-name\");\r\nconst linkInput = document.querySelector(\".popup__input_type_url\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImage = document.querySelector (\".popup__image\");\r\nconst caption = document.querySelector (\".popup__caption\");\r\nconst submitButton = document.querySelector(\".popup__button\");\r\n\r\nconst validationParameters = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nlet profileId;\r\n\r\nPromise.all([getUserInfo(),getCards()]).then(([userInfo,cards])=> {\r\n  \r\n    profileTitle.textContent = userInfo.name;\r\n    profileDescription.textContent = userInfo.about;\r\n    profileImage.style = `background-image: url(${userInfo.avatar})`;\r\n    profileId= userInfo._id;\r\n\r\n    cards.forEach((card) => {\r\n      const cardContent = createCard(\r\n        card.name, \r\n        card.link, \r\n        deleteCard, \r\n        handleCardImage,\r\n        card.likes,\r\n        profileId,\r\n        card.owner._id,\r\n        card._id,\r\n        likeCard,\r\n        unLikeCard,\r\n        removeCard,\r\n        like\r\n      );\r\n      placesList.append(cardContent);  \r\n    })\r\n})\r\n.catch((err) => {\r\n  console.log(err); // \"Что-то пошло не так: ...\"\r\n});\r\n\r\nsetPopupListeners();\r\nenableValidation(validationParameters);\r\n\r\neditButton.addEventListener ('click', () => {\r\n  \r\n  clearValidation(editForm, validationParameters);\r\n  openModal (editForm);\r\n      \r\n  const form = document.forms['edit-profile'];\r\n  const inputName = form.elements.name;\r\n  const inputDescription = form.elements.description;\r\n  \r\n  inputName.value = profileTitle.textContent;\r\n  inputDescription.value = profileDescription.textContent;\r\n});\r\n\r\nfunction handleFormProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(submitButton,true);\r\n  editUserInfo(nameInput.value, jobInput.value).then ((result) => {\r\n      profileTitle.textContent = result.name;\r\n      profileDescription.textContent = result.about;\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n  \r\n  closeModal(editForm);\r\n}\r\n\r\neditProfileForm.addEventListener('submit', handleFormProfileSubmit); \r\n\r\nprofileImage.addEventListener('click', ()=> {\r\n  clearValidation(editAvatar, validationParameters);\r\n  openModal (editAvatar);\r\n});\r\n\r\nfunction handleFormAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n  \r\n  renderLoading(submitButton,true)\r\n  editUserAvatar(urlInput.value).then((data)=>{\r\n    profileImage.style = `background-image: url(${data.avatar})`\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n\r\n  editAvatarForm.reset();\r\n  closeModal(editAvatar);\r\n};\r\n\r\neditAvatar.addEventListener('submit', handleFormAvatarSubmit);\r\n\r\naddButton.addEventListener ('click', () => {\r\n  clearValidation(newCardForm, validationParameters);\r\n  openModal (newCardForm);  \r\n});\r\n\r\nfunction handleFormCardSubmit(evt) {\r\n  evt.preventDefault();\r\n  renderLoading(submitButton,true);\r\n  const card = {\r\n    name: placeNameInput.value,\r\n    link: linkInput.value,\r\n  };\r\n  \r\n  addCard(card.name, card.link).then ((data) => {\r\n    const cardId = data._id;\r\n    placesList.prepend(createCard (\r\n      card.name,\r\n      card.link,\r\n      deleteCard,\r\n      handleCardImage,\r\n      data.likes,\r\n      profileId,\r\n      data.owner._id,\r\n      cardId,\r\n      likeCard,\r\n      unLikeCard,\r\n      removeCard,\r\n      like\r\n    ));\r\n  })\r\n  .catch((err) => {\r\n    console.log(err); // \"Что-то пошло не так: ...\"\r\n  })\r\n  .finally(() =>{renderLoading(submitButton,false)});\r\n  \r\n  addCardForm.reset();\r\n  closeModal(newCardForm);\r\n};\r\n\r\naddCardForm.addEventListener('submit', handleFormCardSubmit); \r\n \r\nfunction handleCardImage (title, link) {\r\n  popupImage.src = link;\r\n  popupImage.alt = title;\r\n  caption.textContent = title;\r\n  openModal (popupTypeImage);\r\n};\r\n\r\nconst renderLoading = (button, isLoading) => {\r\n  button.textContent = isLoading ? 'Сохранение...' : 'Сохранить';\r\n};\r\n\r\n"],"names":["createCard","title","link","deleteCard","handleCardImage","counter","id","cardOwner","cardId","likeCard","unLikeCard","removeCard","like","cardContent","document","querySelector","content","cloneNode","cardImage","textContent","src","alt","length","deleteButton","remove","addEventListener","likeButton","some","item","_id","classList","add","then","concat","catch","err","console","log","card","contains","data","likes","handleEscape","evt","key","closeModal","openModal","form","removeEventListener","hideInputError","formElement","inputElement","validationParameters","formError","inputErrorClass","errorClass","clearValidation","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","forEach","setCustomValidity","toggleButtonState","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","config","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","status","fetch","method","profileId","placesList","editButton","editForm","profileTitle","profileDescription","profileImage","editAvatar","editAvatarForm","urlInput","editProfileForm","nameInput","jobInput","addButton","newCardForm","addCardForm","placeNameInput","linkInput","popupTypeImage","popupImage","caption","submitButton","formSelector","all","_ref","_ref2","userInfo","cards","name","about","style","avatar","owner","append","event","target","patternMismatch","dataset","errorMessage","validationMessage","showInputError","isValid","setEventListeners","enableValidation","forms","inputName","elements","inputDescription","description","value","preventDefault","renderLoading","body","JSON","stringify","result","finally","url","reset","prepend","button","isLoading"],"sourceRoot":""}